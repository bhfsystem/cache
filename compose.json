{
  "version": "2",
  "services": {
    "cache": {
      "volumes": [
        "/data:/data",
        "/config:/config"
      ],
      "ports": [
        "${BLOCK_SSH_PORT}"
      ],
      "image": "${BLOCK_REGISTRY}/block:cache",
      "hostname": "cache"
    },
    "consul": {
      "volumes": [
        "/data:/data",
        "/config:/config"
      ],
      "ports": [
        "${BLOCK_SSH_PORT}",
        "8300:8300", 
        "8301:8301", "8301:8301/udp",
        "8302:8302", "8302:8302/udp",
        "8400:8400", 
        "8500:8500"
      ],
      "image": "${BLOCK_REGISTRY}/block:consul",
      "hostname": "consul"
    },
    "dnsmasq": {
      "volumes": [
        "/data:/data",
        "/config:/config"
      ],
      "ports": [
        "${BLOCK_SSH_PORT}",
        "53:53", "53:53/udp"
      ],
      "image": "${BLOCK_REGISTRY}/block:dnsmasq",
      "hostname": "dnsmasq"
    },
    "openvpn": {
      "volumes": [
        "/data:/data",
        "/config:/config"
      ],
      "ports": [
        "${BLOCK_SSH_PORT}"
      ],
      "image": "${BLOCK_REGISTRY}/block:openvpn",
      "hostname": "openvpn"
    },
    "squid": {
      "volumes": [
        "/data:/data",
        "/config:/config"
      ],
      "ports": [
        "${BLOCK_SSH_PORT}",
        "3128:3128"
      ],
      "image": "${BLOCK_REGISTRY}/block:squid",
      "hostname": "squid"
    },
    "nexus": {
      "volumes": [
        "/data:/data",
        "/config:/config"
      ],
      "ports": [
        "${BLOCK_SSH_PORT}",
        "8081:8081",
        "5000:5000"
      ],
      "image": "${BLOCK_REGISTRY}/block:nexus",
      "hostname": "nexus"
    },
    "nginx": {
      "volumes": [
        "/data:/data",
        "/config:/config"
      ],
      "ports": [
        "${BLOCK_SSH_PORT}",
        "80:8888"
      ],
      "image": "${BLOCK_REGISTRY}/block:nginx",
      "hostname": "nginx"
    }
  }
}
