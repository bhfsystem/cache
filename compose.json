{
  "version": "2.1",
  "networks": {
    "default": {
      "external": {
        "name": "ubuntu_default"
      }
    }
  },
  "services": {
    "squid": {
      "environment": [
        "SERVICE_3128_NAME=squid"
      ],
      "volumes": [
        "/data:/data",
        "/config:/config"
      ],
      "ports": [
        "${BLOCK_SSH_PORT}",
        "3128:3128"
      ],
      "cap_add": [
        "NET_ADMIN"
      ],
      "dns_search": "node.dc1.consul service.dc1.consul",
      "image": "${BLOCK_REGISTRY}/block:squid"
    },
    "nexus": {
      "volumes": [
        "/data:/data",
        "/config:/config"
      ],
      "environment": [
        "SERVICE_5001_NAME=docker",
        "SERVICE_8081_NAME=cache"
      ],
      "expose": [
        "8081"
      ],
      "ports": [
        "${BLOCK_SSH_PORT}",
        "5001:5001"
      ],
      "cap_add": [
        "NET_ADMIN"
      ],
      "dns_search": "node.dc1.consul service.dc1.consul",
      "image": "${BLOCK_REGISTRY}/block:nexus"
    }
  }
}
